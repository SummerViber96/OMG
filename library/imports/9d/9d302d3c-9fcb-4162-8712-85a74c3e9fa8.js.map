{"version":3,"sources":["assets\\scripts\\game.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import A from \"./animal\"\r\ndeclare const window: any;\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n    @property(cc.Camera)\r\n    mainCamera: cc.Camera = null;\r\n    @property(cc.Node)\r\n    char1: cc.Node = null;\r\n    @property(cc.Node)\r\n    char2: cc.Node = null;\r\n    @property(cc.Node)\r\n    char3: cc.Node = null;\r\n    @property(cc.Node)\r\n    pig: cc.Node = null;\r\n    @property(cc.Node)\r\n    pig2: cc.Node = null;\r\n    @property(cc.Node)\r\n    arenaWood: cc.Node = null;\r\n    @property(cc.Node)\r\n    arena2: cc.Node = null;\r\n    @property(cc.Node)\r\n    arena3: cc.Node = null;\r\n    @property(cc.Node)\r\n    tree1: cc.Node = null;\r\n    @property(cc.Node)\r\n    tree2: cc.Node = null\r\n    @property(cc.Node)\r\n    tree3: cc.Node = null;\r\n    @property(cc.Node)\r\n    bulletMain: cc.Node = null;\r\n    @property(cc.Node)\r\n    hand: cc.Node = null;\r\n    @property(cc.Node)\r\n    hand2: cc.Node = null;\r\n    @property(cc.Node)\r\n    hand3: cc.Node = null;\r\n    @property(cc.Node)\r\n    hand4: cc.Node = null;\r\n    @property(cc.Node)\r\n    hand5: cc.Node = null;\r\n    @property(cc.Node)\r\n    popup: cc.Node = null;\r\n    @property(cc.Prefab)\r\n    preWood: cc.Node = null;\r\n    @property(cc.Node)\r\n    bep: cc.Node = null;\r\n    // @property(cc.Node)\r\n    // snow: cc.Node\r\n    @property(cc.Node)\r\n    popup2: cc.Node = null;\r\n    @property(cc.Node)\r\n    house: cc.Node = null;\r\n    @property(cc.Node)\r\n    smokeEff: cc.Node = null;\r\n    @property(cc.Node)\r\n    listHouse: cc.Node[] = []\r\n    @property(cc.Node)\r\n    endCard: cc.Node = null;\r\n    @property(cc.Label)\r\n    lbWood: cc.Label = null;\r\n\r\n    @property(cc.AudioClip)\r\n    soundBg: cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    soundNhanGo: cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    soundChatGo: cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    soundGioThoi: cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    soundUpgrade: cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    soundRang: cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    sounLonKeu: cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    soundDapChao: cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    soundUhh: cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    soundZee: cc.AudioClip = null;\r\n    \r\n    isvertical=false\r\n    isCountWood = 0\r\n    isTarget = null;\r\n    isFollow = false;\r\n    isMoving = false\r\n    isStep = 0;\r\n    start() {\r\n        cc.audioEngine.play(this.soundBg, true, 0.8)\r\n        window.gameReady && window.gameReady();\r\n        cc.audioEngine.playEffect(this.soundGioThoi, true);\r\n        cc.audioEngine.playEffect(this.soundRang, true);\r\n\r\n        cc.Canvas.instance.node.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this);\r\n        cc.Canvas.instance.node.on(cc.Node.EventType.TOUCH_END, this.onTouchCancel, this);\r\n        cc.Canvas.instance.node.on(cc.Node.EventType.TOUCH_CANCEL, this.onTouchCancel, this);\r\n        this.scheduleOnce(() => {\r\n            this.popup.active = true\r\n            // this.hand.active = true\r\n            cc.tween(this.mainCamera).to(0.3, { zoomRatio: 0.8 }).start()\r\n        }, 0.5)\r\n    }\r\n    onTouchMove(event) {\r\n        if (this.isMoving) return;\r\n\r\n        if (!this.isTarget) {\r\n            // console.log(this.isStep)\r\n            if (this.isStep == 1) {\r\n                this.checkTarget(event.getLocation(), this.char3)\r\n\r\n            }\r\n            else if (this.isStep == 2) {\r\n                this.checkTarget(event.getLocation(), this.char2)\r\n\r\n            }\r\n            else if (this.isStep == 0) {\r\n                this.checkTarget(event.getLocation(), this.char1)\r\n\r\n            }\r\n\r\n\r\n        }\r\n        else {\r\n            let pos = event.getLocation();\r\n            pos = this.isTarget.parent.convertToNodeSpaceAR(pos)\r\n            this.isTarget.position = pos\r\n        }\r\n    }\r\n    onTouchCancel(event) {\r\n        if (this.isMoving) return;\r\n        if (!this.isTarget) return;\r\n        console.log(\"step\", this.isStep)\r\n        if (this.isStep == 0) {\r\n            let check = this.checkArea(event.getLocation(), this.arenaWood)\r\n            if (check) {\r\n                this.isStep++\r\n                this.isMoving = true\r\n                let pos = this.arenaWood.position;\r\n                pos = this.arenaWood.parent.convertToWorldSpaceAR(pos)\r\n                pos = this.isTarget.parent.convertToNodeSpaceAR(pos);\r\n                this.isTarget.position = pos\r\n                this.isTarget.getComponent(C).chatGo(this.tree1)\r\n                cc.audioEngine.play(this.soundChatGo, false, 0.8)\r\n\r\n                this.isTarget = null\r\n                cc.tween(this.mainCamera).to(0.3, { zoomRatio: 1.2 }).start()\r\n                cc.tween(this.mainCamera.node).to(0.3, { position: cc.v3(-200, 400) }).call(() => {\r\n                    this.pigMove1(pos)\r\n                }).start()\r\n\r\n\r\n\r\n            }\r\n            else {\r\n                // cc.tween(this.isTarget).to(0.5,{position:this.isTarget.getComponent(C).localPos}).star\r\n                this.isTarget.position = this.isTarget.getComponent(C).localPos\r\n            }\r\n        }\r\n        else if (this.isStep == 1) {\r\n\r\n            let pos = event.getLocation();\r\n            if (this.checkTree(pos, this.arena2)) {\r\n                this.isStep++\r\n                let pos2 = this.arena2.position;\r\n                pos2 = this.arena2.parent.convertToWorldSpaceAR(pos2)\r\n\r\n                pos2 = this.isTarget.parent.convertToNodeSpaceAR(pos2);\r\n                this.isTarget.position = pos2;\r\n                // this.isTarget.getComponent(C).chatGo2(this.tree2)\r\n                this.hand5.active = false\r\n                this.isTarget = null\r\n                this.hand4.active = true\r\n                this.pig2.getComponent(A).attack()\r\n                this.char3.getComponent(C).attack2(this.pig2)\r\n\r\n            }\r\n        }\r\n        else if (this.isStep == 2) {\r\n            // this.isTarget = null;\r\n            let pos = event.getLocation();\r\n            if (this.checkTree(pos, this.arena3)) {\r\n                this.hand5.active = false\r\n                this.isStep++\r\n                pos = this.isTarget.parent.convertToNodeSpaceAR(pos);\r\n                let pos2 = this.arena3.position;\r\n                pos2 = this.arena3.parent.convertToWorldSpaceAR(pos2)\r\n\r\n                pos2 = this.isTarget.parent.convertToNodeSpaceAR(pos2);\r\n                this.isTarget.position = pos2;\r\n\r\n\r\n\r\n                // this.isTarget.position = pos;\r\n                // this.isTarget.getComponent(C).chatGo2(this.tree2)\r\n                this.hand4.active = false\r\n                this.isTarget = null\r\n                this.char2.getComponent(C).attack2(this.pig2)\r\n\r\n                // this.hand4.active = true\r\n            }\r\n        }\r\n        else if (this.isStep == 3) {\r\n            this.isStep++\r\n            let pos = event.getLocation();\r\n            if (this.checkTree(pos, this.tree1)) {\r\n                this.hand4.active = false;\r\n                this.hand5.active = false\r\n                pos = this.isTarget.parent.convertToNodeSpaceAR(pos);\r\n                this.isTarget.position = pos\r\n                // this.isTarget.getComponent(C).chatGo2(this.tree1)\r\n                this.showPop2()\r\n            }\r\n        }\r\n        else if (this.isStep == 4) {\r\n\r\n            // let pos = event.getLocation();\r\n            // if (this.checkTree(pos, this.tree1)) {\r\n            //     pos = this.isTarget.parent.convertToNodeSpaceAR(pos);\r\n            //     this.isTarget.position = pos\r\n            // }\r\n        }\r\n    }\r\n    pigMove1(pos) {\r\n        pos = pos.add(cc.v3(100, 0))\r\n        this.char1.getComponent(C).warning();\r\n        this.pig.getComponent(A).run()\r\n        this.scheduleOnce(() => {\r\n            this.char1.getComponent(C).angry();\r\n\r\n        }, 0.5)\r\n\r\n        cc.audioEngine.play(this.sounLonKeu, false, 0.8)\r\n\r\n        cc.audioEngine.play(this.soundUhh, false, 0.8)\r\n\r\n        cc.tween(this.pig).to(1, { position: pos }).call(() => {\r\n            this.pig.getComponent(A).attack()\r\n\r\n            this.scheduleOnce(() => {\r\n                cc.audioEngine.play(this.soundDapChao, false, 0.8)\r\n            }, 0.3)\r\n\r\n\r\n            this.char1.getComponent(C).attack(this.pig)\r\n\r\n        }).start()\r\n        this.scheduleOnce(() => {\r\n            this.char1.getComponent(C).die()\r\n            this.pig.getComponent(A).idle()\r\n            cc.tween(this.mainCamera.node).delay(0.2).to(0.35, { position: cc.v3(0, 20) }).call(() => {\r\n                this.hand3.active = true\r\n                this.bep.getComponent(cc.Button).enabled = true\r\n            }).start()\r\n        }, 2.5)\r\n    }\r\n\r\n    checkTarget(pos, node) {\r\n        pos = node.parent.convertToNodeSpaceAR(pos)\r\n        if (node.position.sub(pos).mag() <= 200) {\r\n            this.isTarget = node\r\n            this.isFollow = true\r\n            // if (this.isStep == 0) {\r\n            //     cc.tween(this.mainCamera).to(0.3, { zoomRatio: 0.9 }).start()\r\n\r\n            // }\r\n        }\r\n    }\r\n    checkArea(pos, node) {\r\n        pos = node.parent.convertToNodeSpaceAR(pos)\r\n        if (node.position.sub(pos).mag() <= 200) {\r\n            this.hand.active = false\r\n            return true\r\n        }\r\n        return false\r\n    }\r\n    checkTree(pos, node) {\r\n        pos = node.parent.convertToNodeSpaceAR(pos)\r\n        if (node.position.sub(pos).mag() <= 500) {\r\n            return true\r\n        }\r\n        return false\r\n    }\r\n    update() {\r\n        let canvas = this.node.getComponent(cc.Canvas);\r\n\r\n        if (cc.winSize.width < cc.winSize.height) {\r\n            if (!this.isvertical) {\r\n                this.isvertical = true;\r\n                // this.fitCamera.zoomRatio = 0.8\r\n                // this.mainCamera.zoomRatio = 0.7\r\n                // this.mainCamera.node.position = this.mainCamera.node.position.add( cc.v3(-100, 0))\r\n                canvas.fitHeight = false;\r\n                canvas.fitWidth = true;\r\n                // for (let child of this.uiFit.children) {\r\n                //     child.scale = child.scale * 0.5;\r\n                // }\r\n                // this.uiFit.scaleX = 0.8\r\n                // this.uiFit.scaleY = 0.8\r\n            }\r\n        }\r\n        else {\r\n\r\n            this.isvertical = false;\r\n            // this.uiFit.children[0].scale = 0.4\r\n            // this.uiFit.children[1].scale = 1\r\n\r\n            // this.fitCamera.zoomRatio = 1\r\n            // this.mainCamera.zoomRatio = 1.3\r\n            canvas.fitHeight = true;\r\n            canvas.fitWidth = false;\r\n\r\n        }\r\n\r\n        // if (this.isFollow) {\r\n        //     this.mainCamera.node.setPosition(this.isTarget.position.add(cc.v3(50, 0)).clampf(cc.v3(-520, -340), cc.v3(900, 340)));\r\n\r\n        // }\r\n\r\n    }\r\n    createWood(tree) {\r\n        for (let i = 0; i < 4; i++) {\r\n            let wood = cc.instantiate(this.preWood)\r\n            wood.parent = tree\r\n            wood.scale = 1.3\r\n            wood.opacity = 0\r\n            wood.position = cc.v3(0, -50)\r\n            cc.tween(wood).delay(0.12 * i).set({ opacity: 255 }).by(0.3, { position: cc.v3(0, 150) }).call(() => {\r\n                this.isCountWood += 1\r\n                this.lbWood.string = this.isCountWood.toString()\r\n                wood.destroy()\r\n            }).start()\r\n        }\r\n    }\r\n    btn_wood() {\r\n        this.hand3.active = false;\r\n        cc.audioEngine.play(this.soundNhanGo, false, 0.8)\r\n\r\n        this.popup.getComponent(cc.Animation).play(\"close_popup\")\r\n        this.transWood1()\r\n        this.bep.getComponent(cc.Button).enabled = false\r\n\r\n\r\n    }\r\n    transWood1() {\r\n        let targetPos = this.popup.position\r\n        targetPos = this.popup.parent.convertToWorldSpaceAR(targetPos);\r\n        targetPos = this.node.convertToNodeSpaceAR(targetPos);\r\n        let midpos = cc.v2(targetPos.x - 50, (targetPos.y + 80 + 397) / 2)\r\n        for (let i = 0; i < 6; i++) {\r\n            // cc.audioEngine.play(this.soundNhanGo,false,0.8)\r\n            let wood = cc.instantiate(this.preWood)\r\n            wood.parent = this.node;\r\n            wood.position = cc.v3(544, 410)\r\n            wood.scale = 1.2\r\n            cc.tween(wood).delay(0.05 * i).bezierTo(0.5, cc.v2(544, 397), midpos, cc.v2(targetPos.x, targetPos.y + 80)).call(() => {\r\n                this.isCountWood -= 1\r\n                this.lbWood.string = this.isCountWood.toString()\r\n                wood.destroy()\r\n                if (i == 5) {\r\n                    this.getHappy()\r\n                }\r\n            }).start()\r\n        }\r\n    }\r\n    getHappy() {\r\n        cc.audioEngine.play(this.soundUpgrade, false, 0.8)\r\n        // cc.audioEngine.play(this., false, 0.8)\r\n        // cc.audioEngine.stopEffect()\r\n        this.bep.getChildByName(\"fire\").active = true;\r\n        this.char3.getComponent(C).setArcher();\r\n        this.char2.getComponent(C).setArcher();\r\n        this.char2.position = cc.v3(20, -100)\r\n        this.char3.position = cc.v3(-255, -10)\r\n\r\n        this.smokeEff.active = true;\r\n\r\n        cc.tween(this.mainCamera).to(0.3, { zoomRatio: 0.7 }).call(() => {\r\n            // this.hand4.active = true\r\n            this.listHouse[3].active = true\r\n            this.listHouse[3].getComponent(cc.Animation).play(\"house2\")\r\n            this.pig2.active = true;\r\n            cc.audioEngine.play(this.sounLonKeu, false, 0.8)\r\n\r\n            this.scheduleOnce(() => {\r\n                this.hand5.active = true;\r\n                this.isMoving = false\r\n            }, 1)\r\n        }).start()\r\n\r\n    }\r\n    showPop2() {\r\n        this.popup2.active = true;\r\n    }\r\n    btn_upgrade() {\r\n        cc.audioEngine.play(this.soundUpgrade, false, 0.8)\r\n        cc.audioEngine.play(this.soundZee, false, 0.8)\r\n\r\n        this.char3.getComponent(C).getHappy();\r\n        this.char2.getComponent(C).getHappy();\r\n        this.popup2.active = false;\r\n        this.listHouse[3].active = true\r\n        this.house.active = false\r\n        // this.house.getComponent(cc.Animation).play(\"showhouse\")\r\n        this.smokeEff.active = true;\r\n\r\n        this.scheduleOnce(() => {\r\n            cc.tween(this.mainCamera).to(0.4, { zoomRatio: 0.3 }).call(() => {\r\n            }).start()\r\n\r\n\r\n        }, 0.3)\r\n        this.scheduleOnce(() => {\r\n            for (let i = 0; i < this.listHouse.length; i++) {\r\n                let child = this.listHouse[i]\r\n                child.active = true;\r\n                child.getComponent(cc.Animation).play(\"house2\")\r\n                // child.getChildByName(\"fxhouse\").children[0].getComponent(cc.Animation).play(\"efSmoke\")\r\n\r\n            }\r\n        }, 0.8)\r\n        this.scheduleOnce(() => {\r\n            this.endCard.active = true\r\n        }, 1.5)\r\n    }\r\n\r\n}\r\n"]}